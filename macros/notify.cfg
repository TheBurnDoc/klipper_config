[gcode_macro NOTIFY]
description: Display message and clear after delay
gcode:
    {% set msg = params.MSG %}
    {% set delay = params.DELAY|default(4) %}

    M117 {msg}
    UPDATE_DELAYED_GCODE ID=_CLEAR_NOTIFY DURATION={delay}

[delayed_gcode _CLEAR_NOTIFY]
gcode:
    M117